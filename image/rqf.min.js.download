/*! = JS built 2017-05-25 11:10:47 = */function go(){"object"==typeof Prototype&&jQuery.noConflict(),jQuery(document).ready(function(a){function b(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}var c=a(window),d=a("html"),e=a("body"),f=a("#mdcolumn"),g="www.york.ac.uk"===window.location.hostname||"hswebstaff.york.ac.uk"===window.location.hostname||"www.cs.york.ac.uk"===window.location.hostname||"cms.york.ac.uk"===window.location.hostname||"pure.york.ac.uk"===window.location.hostname||"yorkfestivalofideas.com"===window.location.hostname||"yorkconcerts.co.uk"===window.location.hostname,h="yorkfestivalofideas.com"===window.location.hostname||window.location.pathname.indexOf("foi-rqf-test")>-1,i="yorkconcerts.co.uk"===window.location.hostname||0===window.location.pathname.indexOf("/concerts/")||!g&&window.location.pathname.indexOf("concert")>-1,j=a("#location > img").length>0?!0:!1,k=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),l=window.location.pathname.indexOf("/students/")>-1||window.location.pathname.indexOf("/staff/")>-1,m=function(){this.status=!1,this.contentUpdated=!1,this.pageClass="rqf-page",this.toggle=a("<div>").addClass("rqf-toggle"),this.input=a("<input>").attr({type:"checkbox",id:"rqf-toggle"}).appendTo(this.toggle),this.label=a("<label>").attr({"for":"rqf-toggle"}).appendTo(this.toggle),this.text=a("<p>").html("Toggle<br>responsive").appendTo(this.toggle),this.addToggle=function(){this.toggle.prependTo(e),this.input.bind("change",{that:this},this.addClass)},this.addClass=function(a){a.preventDefault();var b=a.data.that;d.toggleClass(b.pageClass),b.input.attr("checked",d.hasClass(b.pageClass)),b.checkContent()},this.addViewportMeta=function(){0==a('meta[name="viewport"]').length&&a("head").append('<meta name="viewport" content="width=device-width, initial-scale=1">'),a("html").hasClass("wf-active")===!1&&a("head").append('<script src="//use.typekit.net/dvj8rpp.js"></script><script>try{Typekit.load();}catch(e){}</script>'),this.status=this.getStatus()},this.checkContent=function(){if(this.isRQF=d.hasClass(this.pageClass),document.cookie="rqf="+(this.isRQF?"true":"false"),this.updateContent(),this.isRQF){if("undefined"==typeof Typekit){!function(a,b){var c=a.createElement(b),d=a.getElementsByTagName(b)[0];c.type="text/javascript",c.src="//use.typekit.net/dvj8rpp.js",d.parentNode.insertBefore(c,d)}(document,"script");var a=setInterval(function(){try{Typekit&&(clearInterval(a),Typekit.load())}catch(b){}},15)}var e=this,f=b(function(){e.status!==e.getStatus()&&e.updateContent()},250);c.resize(f)}},this.updateContent=function(){function d(){var d="https://www.york.ac.uk/static/1.4/img/logo.png";k===!0&&(d="https://www.york.ac.uk/static/1.4/img/logo.svg"),j===!0&&a("#header").addClass("has-logo"),h===!0&&(d="http://yorkfestivalofideas.com/media/news-and-events/york-festival-of-ideas/foi-logo.gif",a("#location a").attr("href","http://yorkfestivalofideas.com/")),i===!0&&(d="https://www.york.ac.uk/media/global/responsiveredesign/img/concerts-logo.png",k===!0&&(d="https://www.york.ac.uk/media/global/responsiveredesign/img/concerts-logo.svg"),a("#location a").attr("href","http://yorkconcerts.co.uk/"),a("#location > img").remove(),a("body").addClass("york-concerts-page")),a("#location a img, header img, #logo img").each(function(a,b){b.removeAttribute("width"),b.removeAttribute("height"),b.src=d,b.style.display="block"}),m.length>0&&(""===a.trim(m.text())?m.remove():(e(),c.resize(b(function(){e()},250))))}function e(){l.css("padding-bottom","");var a=parseInt(l.css("padding-bottom"),10),b=m.outerHeight(),c=Math.max(a-b,0);m.css("position","static");var d=m.outerHeight();m.css("position","absolute"),l.css("padding-bottom",c+d)}function f(){var d=a("#breadcrumb");if(d.length>0){var e=a("#breadcrumb>ul>li>a>img");e[0].src.indexOf("home_white.gif")>-1&&e.attr("src","https://www.york.ac.uk/media/global/templateimages/home.gif"),d.each(function(d,e){function f(b){var c=a(e);c.removeClass("is-closed");var d=c.children("ul"),f=d.children("li"),g=d.height(),h=parseInt(f.css("line-height"),10),i=Math.floor(g/h),j=i>2;c.toggleClass("is-closed",j),j===!0&&($moreLink=a(f[2]).children("a"),$moreLink.one("click",function(a){a.preventDefault(),c.removeClass("is-closed")}))}f();var g=b(function(){f()},250);c.resize(g)})}}function g(){a("#university").length>0&&a("#university").prop("checked",!0)}var l=a("#location"),m=l.children("h1");this.contentUpdated||(d(),f(),g(),this.contentUpdated=!0),this.reorderContent(),this.resetContent()},this.reorderContent=function(){return this.status!==this.getStatus()?(this.status=this.getStatus(),"mobile"===this.status?("undefined"==typeof this.mobileContent&&(this.mobileContent=this.getMobileContent()),f.empty().append(this.mobileContent),c.trigger("contentUpdated.mobile"),this.mobileContent):"undefined"==typeof this.originalContent?"Do nothing":(f.empty().append(this.originalContent),c.trigger("contentUpdated.original"),this.originalContent)):void 0},this.resetContent=function(){this.resetHomepageBanner(),this.replaceTwitterWidget(),this.resetTabs(),this.resetAccordion(),this.courseButtons();var b=a(".gallery-lightbox a");b.length>0&&a.fn.lightBox&&a(".gallery-lightbox a").lightBox(),a("blockquote.quote p:first-child").removeClass("attribution"),a(".fb-page").length>0&&this.resetFacebook(),this.resetSurvey(),this.runScripts(),c.trigger("load"),a(".tabs").length>0&&c.trigger("hashchange")},this.courseButtons=function(){var b=a("#course-applying-content");a("#course-apply-now").click(function(c){c.preventDefault(),b.children("h3").hasClass("expanded")||b.find(".q").click(),a("html,body").animate({scrollTop:b.offset().top},700)}),a("#show-entry-reqs").click(function(c){c.preventDefault(),b.children("h3").hasClass("expanded")||b.find(".q").click(),a("html,body").animate({scrollTop:a("#entry-details").offset().top},700)})},this.runScripts=function(){a(".script-wrapper").each(function(b,c){var d=a(c);if(-1===d.text().indexOf("document.write")){var e=a("<script>").text(d.text()),f=d[0].attributes;a.each(f,function(a,b){e.attr(b.nodeName,b.nodeValue),a===f.length-1&&d.replaceWith(e)})}})},this.resetSurvey=function(){},this.resetFacebook=function(){var b=setInterval(function(){try{if(!FB)return;a(".fb-page").removeAttr("fb-xfbml-state"),a(".fb-page").width("100%"),FB.XFBML.parse(),clearInterval(b)}catch(c){}},20)},this.resetHomepageBanner=function(){var b={fx:"fade",speed:1500,timeout:5e3,pause:!0,fit:1},c=a("#homepagebanner");if(c.length>0){if($imgs=c.find("img"),0===$imgs.length)return;var d=[],e=$imgs.map(function(b,c){var e=a(c),f=e.closest(".imagewithcaption"),g=e.next(".caption");0===g.length&&(g=f.find("p + p")),f.css("display","block");var h=e.height(),i=g.outerHeight();return d.push(i),f.css("display","none"),h}),f=Math.max.apply(null,e),g=Math.max.apply(null,d);c.cycle(b),f>0&&c.height(f);var h=parseInt(c.css("padding-bottom"),10);return h>0&&c.css("padding-bottom",g),!0}return!1},this.resetAccordion=function(){var b=f.find(".faq");if(b.length>0){var c=a(".q");a(".a");c.unbind("click"),c.click(this.clickAccordion);var d=a("a.show");d.unbind("click"),d.click(function(){var b=a(".faq"),c=b.children(".a"),d=b.children(".q");return c.slideDown("fast"),d.addClass("expanded"),!1});var e=a("a.hide");e.unbind("click"),e.click(function(){var b=a(".faq"),c=b.children(".a"),d=b.children(".q");return c.slideUp("fast"),d.removeClass("expanded"),!1})}},this.clickAccordion=function(b){return a(this).next().slideToggle("fast"),a(this).toggleClass("expanded"),!1},this.resetTabs=function(){var b=f.find(".tabs");b.length>0&&(b.each(function(b,c){var d=a(c),e=(d.attr("id").substring(12),d.children("ul")),f=e.find("a"),g=d.children("div"),h=d.offset().top;g.children(".tab").hide(),e.addClass("tabNavigation"),a(window).bind("hashchange",function(b){b.preventDefault();var c=window.location.hash;if(0===d.find('.currentTab a[name="'+c.substring(1)+'"]').length){var e=f.first().attr("href");e=e.substring(e.indexOf("#"));var i=e;g.filter(c).length>0&&(i=c,a(window).scrollTop(h)),g.hide().removeClass("currentTab"),g.filter(i).show().addClass("currentTab"),f.removeClass("selected"),f.filter("[href="+i+"]").addClass("selected")}})}),a(window).trigger("hashchange"))},this.replaceTwitterWidget=function(){if(!this.twitterWidgetId)return!1;if("undefined"==typeof twttr)return!1;if(twttr.init!==!0)return!1;var b=a(".twitter-timeline-container");0===b.length?(b=a("<div>").addClass("twitter-timeline-container").attr({"data-widget-id":this.twitterWidgetId}),a(".twitter-timeline").replaceWith(b)):b.empty(),twttr.widgets.createTimeline(this.twitterWidgetId,b[0],{chrome:"noheader"})},this.prepareVideos=function(){var d=a("iframe[width][height]");d.each(function(b,c){var d=a(c),e=parseInt(d.attr("width"),10);"100%"===d.attr("width")&&(e=d.width());var f=parseInt(d.attr("height"),10),g=e/f;d.attr("data-aspect-ratio",g),d.attr("data-original-width",e)});var e=function(){d.each(function(b,c){var d=a(c),e=parseInt(d.attr("width"),10),f=d.width();0===f&&(f=e);var g=parseFloat(d.attr("data-aspect-ratio"));d.attr({height:f/g})})};c.resize(b(e,500)),e()},this.getMobileContent=function(){if("undefined"!=typeof this.mobileContent)return this.mobileContent;var b=new n(f),c=b.sections;if(this.originalContent=b.originalContent,c===!1)return!1;var d=a("<div>").addClass("col-mobile");return a.each(c,function(a,b){d.append(b)}),d},this.getStatus=function(){if(this.isRQF!==!0)return"desktop";var a=d.width();return 588>a?"mobile":"desktop"},this.addSubnav=function(){var b=a("#lhcolumn");b.click(function(a){a.stopPropagation(),b.toggleClass("is-open")}),c.click(function(a){b.removeClass("is-open")})},this.fixFeedbackForm=function(){var b=a("#feedback"),c=a("#sitemap");b.length>0&&c.length>0&&c.before(b)},this.init=function(){var b=a("html").hasClass("rqf-page");if(b!==!0){var c=["localhost","127.0.0.1","192.168.2.1","cmsmigrate.york.ac.uk","puretest.york.ac.uk"];if(-1===a.inArray(document.location.hostname,c))return!1;this.addToggle()}this.addSubnav(),this.prepareVideos(),this.status="desktop";var d=a(".twitter-timeline");if(d.length>0&&(this.twitterWidgetId=d.attr("data-widget-id")),this.mobileContent=this.getMobileContent(),this.addViewportMeta(),l===!0&&this.fixFeedbackForm(),b!==!0){var e=a.map(document.cookie.split(";"),function(b,c){return a.trim(b)}),f=this;a.each(e,function(b,c){var d=c.split("=");if("rqf"===d[0]){if("true"===d[1]){var e=a.Event("click");e.data={that:f},f.addClass(e)}return!1}})}else this.checkContent()}},n=function(b){this.getOffset=function(a,b){if(thisOffset=a.offset(),a.hasClass("right")||a.hasClass("left")){var c=parseFloat(a.css("margin-top"),10);thisOffset.top-=c}return a.is("script")?!1:(thisOffset.top=Math.floor(thisOffset.top),thisOffset.left=Math.floor(thisOffset.left),thisOffset)},this.makeAccordion=function(b){var c=this,d=a("<div>").addClass("faq-container");b.children(".tabNavigation").find("a").map(function(e,f){var g=f.href.substring(f.href.indexOf("#")),h=b.find(g);0===h.length&&(h=b.find(g+"-content"));var i=new n(h),j="";a.map(i.contentBlocks,function(a,b){j+=a.html()}),h.empty().append(j),h.show().addClass("faq");var k=h.find("h2.tab");k.replaceWith(function(){var b=a(this).html();return a("<h3>").addClass("q").html(b).click(c.clickAccordion)});var l=a("<div>").addClass("a").hide();h.children().not("h3.q").wrapAll(l),h.children("h3.q").prependTo(h),d.append(h)});return d},this.fixTable=function(b){var c=b.children("thead"),d=b.children("tbody"),e=a("<div>").addClass("table-container"),f=b[0].className,g=b.find("td[colspan], td[rowspan]").length;0===c.length&&(c=d);var h=c.children("tr:first-child"),i=h.children();if(i.length<3)return b.clone();if(g>0)return b.clone();var j=h.find("th").length>0;j===!0&&h.remove(),i.each(function(b,c){var d=a(c),e=d.attr("colspan")||1;if(e>1){d.attr("colspan",1);for(var f=a("<th>"),g=1;e>g;g++)i.splice(b+1,0,f.clone())}});var k=d.children("tr"),l=a("<tbody>"),m=a("<table>").append(l).addClass(f);return k.each(function(b,c){var d=a(c);if(!d.hasClass("is-hidden@mobile")){var e=a(k[b]).children();if(i.each(function(b,c){var d=a(c),f=a("<tr>");if(j){var g=a("<th>").html(d.html());f.append(g)}e[b]&&(thisColspan=parseInt(e[b].getAttribute("colspan"),10),thisColspan>1&&(e[b].removeAttribute("colspan"),e[b].setAttribute("rowspan",thisColspan)),f.append(e[b])),l.append(f)}),b<k.length){var f=a("<tr>").addClass("spacer-row");l.append(f)}}}),e.append(m),e},this.processContent=function(b){var c=b.clone(!0,!0);(b.is("#tabs")||b.is(".tabs"))&&(c=this.makeAccordion(c));var d=c.find("table");if(b.is("table"))c=this.fixTable(c);else if(d.length>0){var e=this;d.each(function(b,c){var d=a(c);$tableClone=e.fixTable(d),$tableClone.is(d)||d.replaceWith($tableClone)})}var f=c[0].style;return a.each(f,function(a,b){"float"===b&&(f["float"]="none")}),c},this.getSections=function(b){var c=b.find("script");c.each(function(b,c){var d=a(c),e=d.text(),f=a("<div>").text(e),g=d[0].attributes;a.each(g,function(a,b){f.attr(b.nodeName,b.nodeValue),a===g.length-1&&(f.addClass("script-wrapper").css("display","none"),d.replaceWith(f))})});var d=b.children();if(0===d.length)return!1;var e=d.find(".newline-narrow-gallery, .newline-wide-gallery");e.length>0&&e.remove(),this.originalContent=d.clone(!0),this.contentBlocks=[];var f=-1,g=this,h=function(b){var c=b.find(".rightBox");0!==c.length&&c.each(function(b,c){var d=a(c),e=d.parent();d.remove().appendTo(e)})},i=function(b,c){var d=a(c),e=g.processContent(d),i=d.parents(".col-half, .col-third").length>0?"col-half":"";if(g.isContentStart(d)||0===b){b>0&&h(g.contentBlocks[f]);var j=g.getOffset(d,f),k=a("<div>").addClass(i);j!==!1&&k.attr({"data-offset-top":j.top,"data-offset-left":j.left}),k.append(e),g.contentBlocks[++f]=k}else{g.contentBlocks[f];"SCRIPT"===e[0].nodeName?-1===e[0].innerHTML.indexOf("document.write")&&g.contentBlocks[f].append(e):g.contentBlocks[f].append(e)}};return d.each(function(b,c){var d=a(c);d.hasClass("col-half")||d.hasClass("col-third")?($contentChildren=d.children(),$contentChildren.each(i)):i(b,c)}),h(this.contentBlocks[f]),this.contentBlocks.sort(function(b,c){var d=a(b),e=a(c),f=d.attr("data-offset-top"),g=e.attr("data-offset-top");if(!f&&!g)return 0;if(f!==g)return f-g;if(d.hasClass("right")||d.hasClass("quote"))return-1;if(e.hasClass("right")||e.hasClass("quote"))return 1;var h=d.attr("data-offset-left"),i=e.attr("data-offset-left");return h!==i?h-i:0}),this.contentBlocks},this.isContentStart=function(b){var c=["h1","h2"],d=function(b){return b[0]&&a.inArray(b[0].nodeName.toLowerCase(),c)>-1},e=function(a){return a.hasClass("boxout")===!0||a.hasClass("boxoutAlt")===!0},f=function(a){return a.hasClass("faq-container")===!0},g=function(a){return"tabs"===a.attr("id")},h=function(a){var b=a.next();return 0==b.length?!1:a.hasClass("unpadded")&&a.find("img").length>0&&(d(b)||e(b))?!0:!1},i=function(a){return(a.hasClass("left")||a.hasClass("right"))&&a.children("img").length>0?!0:!1},j=b.prev()||!1;return h(b)?!0:i(b)&&!d(j)?!0:d(b)?h(j)===!0?!1:i(j)===!0?!1:!0:e(b)&&b.children().length>0&&d(b.children().first())?h(j)===!0?!1:j.length>0&&"img"===j[0].nodeName.toLowerCase()?!1:!0:f(b)?!0:g(b)?!0:!1},this.sections=this.getSections(b)},o=new m;o.init(),g||(window.rqf=o)})}window.jQuery?go():!function(a,b){var c=a.createElement(b),d=a.getElementsByTagName(b)[0];c.src="https://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js",c.onload=function(){go()},d.parentNode.insertBefore(c,d)}(document,"script");